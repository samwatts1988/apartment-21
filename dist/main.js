var landing;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).barba=t()}(this,function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}function f(){return(f=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r,o=t[n];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return(M=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var r=[null],t=(r.push.apply(r,t),new(Function.bind.apply(e,r)));return n&&i(t,n.prototype),t}).apply(null,arguments)}function I(e){var n="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return M(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)}(e)}function l(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"==typeof Symbol||Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")),"undefined"==typeof Symbol||Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"));(n=s=s||{})[n.off=0]="off",n[n.error=1]="error",n[n.warning=2]="warning",n[n.info=3]="info",n[n.debug=4]="debug";var s,B=s.off,p=(d.getLevel=function(){return B},d.setLevel=function(e){return B=s[e]},(n=d.prototype).error=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];this.i(console.error,s.error,n)},n.warn=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];this.i(console.warn,s.warning,n)},n.info=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];this.i(console.info,s.info,n)},n.debug=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];this.i(console.log,s.debug,n)},n.i=function(e,t,n){t<=d.getLevel()&&e.apply(console,["["+this.t+"] "].concat(n))},d),n=y,a=z,u=v,c=F,h=U,D="/",N=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function d(e){this.t=e}function v(e,t){for(var n=[],r=0,o=0,i="",s=t&&t.delimiter||D,a=t&&t.whitelist||void 0,u=!1;null!==(h=N.exec(e));){var c,h,f,l,p=h[0],d=h[1],v=h.index;i+=e.slice(o,v),o=v+p.length,d?(i+=d[1],u=!0):(v="",p=h[2],d=h[3],c=h[4],h=h[5],!u&&i.length&&(l=i[f=i.length-1],(!a||-1<a.indexOf(l))&&(v=l,i=i.slice(0,f))),i&&(n.push(i),i="",u=!1),n.push({name:p||r++,prefix:v,delimiter:l=v||s,optional:"?"===h||"*"===h,repeat:"+"===h||"*"===h,pattern:(f=d||c)?f.replace(/([=!:$/()])/g,"\\$1"):"[^"+m(l===s?l:l+s)+"]+?"}))}return(i||o<e.length)&&n.push(i+e.substr(o)),n}function z(u,c){return function(e,t){var n=u.exec(e);if(!n)return!1;for(var r,e=n[0],o=n.index,i={},s=t&&t.decode||decodeURIComponent,a=1;a<n.length;a++)void 0!==n[a]&&(i[(r=c[a-1]).name]=r.repeat?n[a].split(r.delimiter).map(function(e){return s(e,r)}):s(n[a],r));return{path:e,index:o,params:i}}}function F(h,e){for(var f=new Array(h.length),t=0;t<h.length;t++)"object"==typeof h[t]&&(f[t]=new RegExp("^(?:"+h[t].pattern+")$",g(e)));return function(e,t){for(var n="",r=t&&t.encode||encodeURIComponent,o=!t||!1!==t.validate,i=0;i<h.length;i++){var s=h[i];if("string"!=typeof s){var a,u=e?e[s.name]:void 0;if(Array.isArray(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(a=r(u[c],s),o&&!f[i].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');n+=(0===c?s.prefix:s.delimiter)+a}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}else{if(a=r(String(u),s),o&&!f[i].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+a+'"');n+=s.prefix+a}}else n+=s}return n}}function m(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function g(e){return e&&e.sensitive?"":"i"}function U(e,t,n){for(var r=(n=n||{}).strict,o=!1!==n.start,i=!1!==n.end,s=n.delimiter||D,a=[].concat(n.endsWith||[]).map(m).concat("$").join("|"),u=o?"^":"",c=0;c<e.length;c++){var h,f=e[c];"string"==typeof f?u+=m(f):(h=f.repeat?"(?:"+f.pattern+")(?:"+m(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern,t&&t.push(f),u+=f.optional?f.prefix?"(?:"+m(f.prefix)+"("+h+"))?":"("+h+")?":m(f.prefix)+"("+h+")")}return i?(r||(u+="(?:"+m(s)+")?"),u+="$"===a?"$":"(?="+a+")"):(i="string"==typeof(o=e[e.length-1])?o[o.length-1]===s:void 0===o,r||(u+="(?:"+m(s)+"(?="+a+"))?"),i||(u+="(?="+m(s)+"|"+a+")")),new RegExp(u,g(n))}function y(e,t,n){if(e instanceof RegExp){var r=e,o=t;if(o){var i=r.source.match(/\((?!\?)/g);if(i)for(var s=0;s<i.length;s++)o.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null})}return r}if(Array.isArray(e)){for(var a=e,u=t,c=n,h=[],f=0;f<a.length;f++)h.push(y(a[f],u,c).source);return new RegExp("(?:"+h.join("|")+")",g(c))}return r=t,U(v(e,t=n),r,t)}n.match=function(e,t){var n=[];return z(y(e,n,t),n)},n.regexpToFunction=a,n.parse=u,n.compile=function(e,t){return F(v(e,t),t)},n.tokensToFunction=c,n.tokensToRegExp=h;function w(e,r){try{var t=function(){if(!r.next.html)return Promise.resolve(e).then(function(e){var t,n=r.next;e&&(t=k.toElement(e),n.namespace=k.getNamespace(t),n.container=k.getContainer(t),n.html=e,$.update({ns:n.namespace}),t=k.toDocument(e),document.title=t.title)})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}function b(e){return void 0===e&&(e=window.location.href),P(e).port}function P(e){var t;null===(r=e.match(/:\d+/))?(/^http/.test(e)&&(t=80),/^https/.test(e)&&(t=443)):(r=r[0].substring(1),t=parseInt(r,10));var n,r=e.replace(W(),""),e={},o=r.indexOf("#");return 0<=o&&(n=r.slice(o+1),r=r.slice(0,o)),0<=(o=r.indexOf("?"))&&(e=K(r.slice(o+1)),r=r.slice(0,o)),{hash:n,path:r,port:t,query:e}}function E(e){return(e=void 0===e?window.location.href:e).replace(/(\/#.*|\/|#.*)$/,"")}var x={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},k=((a=Y.prototype).toString=function(e){return e.outerHTML},a.toDocument=function(e){return this.u.parseFromString(e,"text/html")},a.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},a.getHtml=function(e){return void 0===e&&(e=document),this.toString(e.documentElement)},a.getWrapper=function(e){return(e=void 0===e?document:e).querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},a.getContainer=function(e){return(e=void 0===e?document:e).querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},a.removeContainer=function(e){document.body.contains(e)&&e.parentNode.removeChild(e)},a.addContainer=function(e,t){var n=this.getContainer();n?this.s(e,n):t.appendChild(e)},a.getNamespace=function(e){e=(e=void 0===e?document:e).querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},a.getHref=function(e){if(e.tagName&&"a"===e.tagName.toLowerCase()){if("string"==typeof e.href)return e.href;e=e.getAttribute("href")||e.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},a.resolveUrl=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];var o=n.length;if(0===o)throw new Error("resolveUrl requires at least one argument; got none.");var i=document.createElement("base");if(i.href=arguments[0],1===o)return i.href;var s=document.getElementsByTagName("head")[0];s.insertBefore(i,s.firstChild);for(var a,u=document.createElement("a"),c=1;c<o;c++)u.href=e[c],i.href=a=u.href;return s.removeChild(i),a},a.s=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},new Y),$=((u=j.prototype).init=function(e,t){this.l="barba";t={ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e},this.h.push(t),this.v=0,t={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(t,"",e)},u.change=function(e,t,n){var r;return n&&n.state?(r=(n=n.state).index,t=this.m(this.v-r),this.replace(n.states),this.v=r):this.add(e,t),t},u.add=function(e,t){var n=this.size,t=this.p(t),r={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:e},o=(this.h.push(r),this.v=n,{from:this.l,index:n,states:[].concat(this.h)});switch(t){case"push":window.history&&window.history.pushState(o,"",e);break;case"replace":window.history&&window.history.replaceState(o,"",e)}},u.update=function(e,t){t=t||this.v,e=f({},this.get(t),{},e);this.set(t,e)},u.remove=function(e){e?this.h.splice(e,1):this.h.pop(),this.v--},u.clear=function(){this.h=[],this.v=-1},u.replace=function(e){this.h=e},u.get=function(e){return this.h[e]},u.set=function(e,t){return this.h[e]=t},u.p=function(e){var t="push",n=x.prefix+"-"+x.history;return t=e.hasAttribute&&e.hasAttribute(n)?e.getAttribute(n):t},u.m=function(e){return 1<Math.abs(e)?0<e?"forward":"back":0===e?"popstate":0<e?"back":"forward"},e(j,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),new j),Q=n,V={__proto__:null,update:w,nextTick:function(){return new Promise(function(e){window.requestAnimationFrame(e)})},pathToRegexp:Q},W=function(){return window.location.origin},K=function(e){return e.split("&").reduce(function(e,t){t=t.split("=");return e[t[0]]=t[1],e},{})},X={__proto__:null,getHref:function(){return window.location.href},getOrigin:W,getPort:b,getPath:function(e){return void 0===e&&(e=window.location.href),P(e).path},parse:P,parseQuery:K,clean:E};function j(){this.h=[],this.v=-1}function Y(){this.o=x,this.u=new DOMParser}function G(o,i,s){return void 0===i&&(i=2e3),new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){var e;r.readyState===XMLHttpRequest.DONE&&(200===r.status?t(r.responseText):r.status&&(e={status:r.status,statusText:r.statusText},s(o,e),n(e)))},r.ontimeout=function(){var e=new Error("Timeout error ["+i+"]");s(o,e),n(e)},r.onerror=function(){var e=new Error("Fetch error");s(o,e),n(e)},r.open("GET",o),r.timeout=i,r.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),r.setRequestHeader("x-barba","yes"),r.send()})}function A(s,a){return void 0===a&&(a={}),function(){for(var e=arguments,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=e[n];var i=!1;return new Promise(function(n,r){a.async=function(){return i=!0,function(e,t){e?r(e):n(t)}};var e,t=s.apply(a,o);i||(!(e=t)||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.then?n(t):t.then(n,r))})}}function J(){return!window.history.pushState}function Z(e){return!e.el||!e.href}function ee(e){return 1<(e=e.event).which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey}function te(e){return(e=e.el).hasAttribute("target")&&"_blank"===e.target}function ne(e){return void 0!==(e=e.el).protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname}function re(e){return void 0!==(e=e.el).port&&b()!==b(e.href)}function oe(e){return(e=e.el).getAttribute&&"string"==typeof e.getAttribute("download")}function ie(e){return e.el.hasAttribute(x.prefix+"-"+x.prevent)}function se(e){return Boolean(e.el.closest("["+x.prefix+"-"+x.prevent+'="all"]'))}function ae(e){return e=e.href,E(e)===E()&&b(e)===b()}t(_,he=function(){}),(c=_.prototype).init=function(){var r=this;this.registered.clear(),this.all.forEach(function(n){r[n]||(r[n]=function(e,t){r.registered.has(n)||r.registered.set(n,new Set),r.registered.get(n).add({ctx:t||{},fn:e})})})},c.do=function(t){for(var n,e=arguments,r=this,o=arguments.length,i=new Array(1<o?o-1:0),s=1;s<o;s++)i[s-1]=e[s];return this.registered.has(t)?(n=Promise.resolve(),this.registered.get(t).forEach(function(e){n=n.then(function(){return A(e.fn,e.ctx).apply(void 0,i)})}),n.catch(function(e){r.logger.debug("Hook error ["+t+"]"),r.logger.error(e)})):Promise.resolve()},c.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},c.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var n=[];this.registered.forEach(function(e,t){return n.push(t)}),this.logger.info("Registered hooks: "+n.join(","))};var S,ue,ce,he,R=new _,h=(ye.prototype.checkHref=function(e){var t;return"boolean"==typeof this.g?this.g:(t=P(e).path,this.P.some(function(e){return null!==e.exec(t)}))},ye),fe=(t(H,ce=h),(a=H.prototype).set=function(e,t,n){return this.k.set(e,{action:n,request:t}),{action:n,request:t}},a.get=function(e){return this.k.get(e)},a.getRequest=function(e){return this.k.get(e).request},a.getAction=function(e){return this.k.get(e).action},a.has=function(e){return!this.checkHref(e)&&this.k.has(e)},a.delete=function(e){return this.k.delete(e)},a.update=function(e,t){t=f({},this.k.get(e),{},t);return this.k.set(e,t),t},H),le=(t(q,ue=h),(u=q.prototype).init=function(){this.add("pushState",J),this.add("exists",Z),this.add("newTab",ee),this.add("blank",te),this.add("corsDomain",ne),this.add("corsPort",re),this.add("download",oe),this.add("preventSelf",ie),this.add("preventAll",se),this.add("sameUrl",ae,!1)},u.add=function(e,t,n){void 0===n&&(n=!0),this.tests.set(e,t),n&&this.suite.push(e)},u.run=function(e,t,n,r){return this.tests.get(e)({el:t,event:n,href:r})},u.checkLink=function(t,n,r){var o=this;return this.suite.some(function(e){return o.run(e,t,n,r)})},q),O=(t(L,S=I(Error)),L),pe=((n=ge.prototype).add=function(e,t){"rule"===e?this.A.splice(t.position||0,0,t.value):this.all.push(t),this.update()},n.resolve=function(o,e){var t,i=this,n=(n=(e=void 0===e?{}:e).once?this.once:this.page).filter(e.self?function(e){return e.name&&"self"===e.name}:function(e){return!e.name||"self"!==e.name}),s=new Map,n=n.find(function(t){var n=!0,r={};return!(!e.self||"self"!==t.name)||(i.A.reverse().forEach(function(e){n&&(n=i.R(t,e,o,r),t.from&&t.to&&(n=i.R(t,e,o,r,"from")&&i.R(t,e,o,r,"to")),t.from&&!t.to&&(n=i.R(t,e,o,r,"from")),!t.from&&t.to&&(n=i.R(t,e,o,r,"to")))}),s.set(t,r),n)}),r=s.get(n),a=[];return a.push(e.once?"once":"page"),e.self&&a.push("self"),r?(t=[n],0<Object.keys(r).length&&t.push(r),(r=this.logger).info.apply(r,["Transition found ["+a.join(",")+"]"].concat(t))):this.logger.info("No transition found ["+a.join(",")+"]"),n},n.update=function(){var t=this;this.all=this.all.map(function(e){return t.T(e)}).sort(function(e,t){return e.priority-t.priority}).reverse().map(function(e){return delete e.priority,e}),this.page=this.all.filter(function(e){return void 0!==e.leave||void 0!==e.enter}),this.once=this.all.filter(function(e){return void 0!==e.once})},n.R=function(e,t,n,r,o){var i=!0,s=!1,a=t.name,u=a,c=a,h=a,f=o?e[o]:e,l="to"===o?n.next:n.current;if((!o||f)&&f[a]){switch(t.type){case"strings":default:var p=Array.isArray(f[u])?f[u]:[f[u]];l[u]&&-1!==p.indexOf(l[u])&&(s=!0),-1===p.indexOf(l[u])&&(i=!1);break;case"object":p=Array.isArray(f[c])?f[c]:[f[c]];l[c]&&(l[c].name&&-1!==p.indexOf(l[c].name)&&(s=!0),-1!==p.indexOf(l[c].name))||(i=!1);break;case"function":f[h](n)?s=!0:i=!1}s&&(o?(r[o]=r[o]||{},r[o][a]=e[o][a]):r[a]=e[a])}return i},n.O=function(e,t,n){var r=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(r+=Math.pow(10,n),e.from&&e.from[t]&&(r+=1),e.to&&e.to[t]&&(r+=2)),r},n.T=function(n){var r=this,o=n.priority=0;return this.A.forEach(function(e,t){o+=r.O(n,e.name,t+1)}),n.priority=o,n},ge),de=((c=T.prototype).get=function(e,t){return this.store.resolve(e,t)},c.doOnce=function(e){var t=e.data,n=e.transition;try{function r(){o.S=!1}var o=this,i=n||{},s=(o.S=!0,l(function(){return Promise.resolve(o.j("beforeOnce",t,i)).then(function(){return Promise.resolve(o.once(t,i)).then(function(){return Promise.resolve(o.j("afterOnce",t,i)).then(function(){})})})},function(e){o.S=!1,o.logger.debug("Transition error [before/after/once]"),o.logger.error(e)}));return Promise.resolve(s&&s.then?s.then(r):r())}catch(e){return Promise.reject(e)}},c.doPage=function(e){var i=e.data,t=e.transition,s=e.page,a=e.wrapper;try{function n(e){u.S=!1}var u=this,c=t||{},h=!0===c.sync||!1,r=(u.S=!0,l(function(){function e(){return Promise.resolve(u.j("before",i,c)).then(function(){var t=!1;function e(e){return t?e:Promise.resolve(u.remove(i)).then(function(){return Promise.resolve(u.j("after",i,c)).then(function(){})})}var n,r,o=h?l(function(){return Promise.resolve(u.add(i,a)).then(function(){return Promise.resolve(u.j("beforeLeave",i,c)).then(function(){return Promise.resolve(u.j("beforeEnter",i,c)).then(function(){return Promise.resolve(Promise.all([u.leave(i,c),u.enter(i,c)])).then(function(){return Promise.resolve(u.j("afterLeave",i,c)).then(function(){return Promise.resolve(u.j("afterEnter",i,c)).then(function(){})})})})})})},function(e){if(u.M(e))throw new O(e,"Transition error [sync]")}):(n=!(o=function(e){return t?e:l(function(){var e=function(){if(!1!==n)return Promise.resolve(u.add(i,a)).then(function(){return Promise.resolve(u.j("beforeEnter",i,c)).then(function(){return Promise.resolve(u.enter(i,c,n)).then(function(){return Promise.resolve(u.j("afterEnter",i,c)).then(function(){})})})})}();if(e&&e.then)return e.then(function(){})},function(e){if(u.M(e))throw new O(e,"Transition error [before/after/enter]")})}),(r=l(function(){return Promise.resolve(u.j("beforeLeave",i,c)).then(function(){return Promise.resolve(Promise.all([u.leave(i,c),w(s,i)]).then(function(e){return e[0]})).then(function(e){return n=e,Promise.resolve(u.j("afterLeave",i,c)).then(function(){})})})},function(e){if(u.M(e))throw new O(e,"Transition error [before/after/leave]")}))&&r.then?r.then(o):o(r));return o&&o.then?o.then(e):e(o)})}var t=function(){if(h)return Promise.resolve(w(s,i)).then(function(){})}();return t&&t.then?t.then(e):e()},function(e){throw(u.S=!1,e.name&&"BarbaError"===e.name)?(u.logger.debug(e.label),u.logger.error(e.error)):(u.logger.debug("Transition error [page]"),u.logger.error(e)),e}));return Promise.resolve(r&&r.then?r.then(n):n())}catch(e){return Promise.reject(e)}},c.once=function(e,t){try{return Promise.resolve(R.do("once",e,t)).then(function(){return t.once?A(t.once,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},c.leave=function(e,t){try{return Promise.resolve(R.do("leave",e,t)).then(function(){return t.leave?A(t.leave,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},c.enter=function(e,t,n){try{return Promise.resolve(R.do("enter",e,t)).then(function(){return t.enter?A(t.enter,t)(e,n):Promise.resolve()})}catch(e){return Promise.reject(e)}},c.add=function(e,t){try{return k.addContainer(e.next.container,t),R.do("nextAdded",e),Promise.resolve()}catch(e){return Promise.reject(e)}},c.remove=function(e){try{return k.removeContainer(e.current.container),R.do("currentRemoved",e),Promise.resolve()}catch(e){return Promise.reject(e)}},c.M=function(e){return e.message?!/Timeout error|Fetch error/.test(e.message):!e.status},c.j=function(e,t,n){try{return Promise.resolve(R.do(e,t,n)).then(function(){return n[e]?A(n[e],n)(t):Promise.resolve()})}catch(e){return Promise.reject(e)}},e(T,[{key:"isRunning",get:function(){return this.S},set:function(e){this.S=e}},{key:"hasOnce",get:function(){return 0<this.store.once.length}},{key:"hasSelf",get:function(){return this.store.all.some(function(e){return"self"===e.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})}}]),T),ve=(me.prototype.L=function(n){var r=this;return function(e){var t=n.match(/enter/i)?e.next:e.current,t=r.byNamespace.get(t.namespace);return t&&t[n]?A(t[n],t)(e):Promise.resolve()}},me);function me(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==e.length&&(e.forEach(function(e){t.byNamespace.set(e.namespace,e)}),this.names.forEach(function(e){R[e](t.L(e))}))}function T(e){void 0===e&&(e=[]),this.logger=new p("@barba/core"),this.S=!1,this.store=new pe(e)}function ge(e){void 0===e&&(e=[]),this.logger=new p("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}function L(e,t){var n,r=arguments;void 0===t&&(t="Barba error");for(var o=arguments.length,i=new Array(2<o?o-2:0),s=2;s<o;s++)i[s-2]=r[s];return(n=S.call.apply(S,[this].concat(i))||this).error=e,n.label=t,Error.captureStackTrace&&Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),L),n.name="BarbaError",n}function q(e){return(e=ue.call(this,e)||this).suite=[],e.tests=new Map,e.init(),e}function H(e){return(e=ce.call(this,e)||this).k=new Map,e}function ye(e){this.P=[],"boolean"==typeof e?this.g=e:(e=Array.isArray(e)?e:[e],this.P=e.map(function(e){return Q(e)}))}function _(){var e;return(e=he.call(this)||this).logger=new p("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null});var we={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return(a=C.prototype).use=function(e,t){var n=this.plugins;-1<n.indexOf(e)?this.logger.warn("Plugin ["+e.name+"] already installed."):"function"==typeof e.install?(e.install(this,t),n.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},a.init=function(e){var e=void 0===e?{}:e,t=e.transitions,t=void 0===t?[]:t,n=e.views,n=void 0===n?[]:n,r=e.schema,o=void 0===r?x:r,r=e.requestError,i=e.timeout,i=void 0===i?2e3:i,s=e.cacheIgnore,s=void 0!==s&&s,a=e.prefetchIgnore,a=void 0!==a&&a,u=e.preventRunning,u=void 0!==u&&u,c=e.prevent,c=void 0===c?null:c,h=e.debug,e=e.logLevel;if(p.setLevel(!0===(void 0!==h&&h)?"debug":void 0===e?"off":e),this.logger.info(this.version),Object.keys(o).forEach(function(e){x[e]&&(x[e]=o[e])}),this.$=r,this.timeout=i,this.cacheIgnore=s,this.prefetchIgnore=a,this.preventRunning=u,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();h=this.data.current;if(!h.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new fe(s),this.prevent=new le(a),this.transitions=new de(t),this.views=new ve(n),null!==c){if("function"!=typeof c)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",c)}this.history.init(h.url.href,h.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(e){return e.init()});e=this.data;e.trigger="barba",e.next=e.current,e.current=f({},this.schemaPage),this.hooks.do("ready",e),this.once(e),this.q()},a.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},a.force=function(e){window.location.assign(e)},a.go=function(e,t,n){var r;if(void 0===t&&(t="barba"),this.transitions.isRunning)this.force(e);else if(!(r="popstate"===t?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return t=this.history.change(e,t,n),n&&(n.stopPropagation(),n.preventDefault()),this.page(e,t,r)},a.once=function(n){try{var r=this;return Promise.resolve(r.hooks.do("beforeEnter",n)).then(function(){function e(){return Promise.resolve(r.hooks.do("afterEnter",n)).then(function(){})}var t=function(){var e;if(r.transitions.hasOnce)return e=r.transitions.get(n,{once:!0}),Promise.resolve(r.transitions.doOnce({transition:e,data:n})).then(function(){})}();return t&&t.then?t.then(e):e()})}catch(n){return Promise.reject(n)}},a.page=function(e,t,n){try{function r(){var t=o.data;return Promise.resolve(o.hooks.do("page",t)).then(function(){var e=l(function(){var e=o.transitions.get(t,{once:!1,self:n});return Promise.resolve(o.transitions.doPage({data:t,page:i,transition:e,wrapper:o._})).then(function(){o.q()})},function(){0===p.getLevel()&&o.force(t.current.url.href)});if(e&&e.then)return e.then(function(){})})}var o=this,i=(o.data.next.url=f({href:e},o.url.parse(e)),o.data.trigger=t,(o.cache.has(e)?o.cache.update(e,{action:"click"}):o.cache.set(e,o.request(e,o.timeout,o.onRequestError.bind(o,t)),"click")).request),s=function(){if(o.transitions.shouldWait)return Promise.resolve(w(i,o.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(r):r())}catch(e){return Promise.reject(e)}},a.onRequestError=function(e){var t=arguments;this.transitions.isRunning=!1;for(var n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=t[o];var i=r[0],s=r[1],a=this.cache.getAction(i);return this.cache.delete(i),!(this.$&&!1===this.$(e,a,i,s)||("click"===a&&this.force(i),1))},a.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(e){t.logger.error(e)}),"prefetch")},a.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},a.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},a.B=function(e){var t,n=this,e=this.I(e);e&&(t=this.dom.getHref(e),this.prevent.checkHref(t)||this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,e)).catch(function(e){n.logger.error(e)}),"enter"))},a.U=function(e){var t=this.I(e);if(t)return this.transitions.isRunning&&this.preventRunning?(e.preventDefault(),void e.stopPropagation()):void this.go(this.dom.getHref(t),t,e)},a.D=function(e){this.go(this.url.getHref(),"popstate",e)},a.I=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},a.q=function(){var e=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:f({href:e},this.url.parse(e))};this.C={current:e,next:f({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(C,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),new C;function C(){this.version="2.9.7",this.schemaPage=we,this.Logger=p,this.logger=new p("@barba/core"),this.plugins=[],this.hooks=R,this.dom=k,this.helpers=V,this.history=$,this.request=G,this.url=X}}),jQuery.throttle=function(o,i,s,a){var u,c=!1,h=0;function f(){u&&clearTimeout(u)}function e(){var e=this,t=Date.now()-h,n=arguments;function r(){h=Date.now(),s.apply(e,n)}c||(a&&!u&&r(),f(),void 0===a&&o<t?r():!0!==i&&(u=setTimeout(a?function(){u=void 0}:r,void 0===a?o-t:o)))}return"boolean"!=typeof i&&(a=s,s=i,i=void 0),e.cancel=function(){f(),c=!0},e},jQuery.debounce=function(e,t,n){return void 0===n?jQuery.throttle(e,t,!1):jQuery.throttle(e,n,!1!==t)},function(n){n.fn.lazy=function(e){return this.each(function(){r.add(this,e)})};var r={init:function(e,t){n.data(e,"lazy.load",t)},load:function(e){var t=n.data(e,"lazy.load");"function"==typeof t&&t.call(e)}};window.IntersectionObserver?(r.run=function(e){e.forEach(function(e){(e.isIntersecting||0<e.intersectionRatio)&&(r.observer.unobserve(e.target),r.load(e.target))})},r.add=function(e,t){r.observer||(r.observer=new IntersectionObserver(r.run)),r.init(e,t),r.observer.observe(e)}):(r.run=function(){r.targets=n.grep(r.targets,function(e){var t=e.getBoundingClientRect(),t=t.top<=window.innerHeight&&0<=t.bottom&&"none"!==window.getComputedStyle(e).display;return t&&r.load(e),!t}),r.targets.length||n(window).off(".lazy")},r.add=function(e,t){r.targets&&r.targets.length||(r.targets=[],n(window).on("resize.lazy orientationchange.lazy scroll.lazy",n.throttle(250,r.run))),r.init(e,t),r.targets.push(e),r.run()})}(jQuery),function(e){(landing=function(){setTimeout(function(){e("#content").removeClass("fade-out")},1250)})()}(jQuery),function(){var t=document.querySelector(".volume-toggle"),e=document.getElementById("video"),n=new Vimeo.Player(e);n.setVolume(0),t.addEventListener("click",function(e){e.preventDefault(),n.getVolume().then(function(e){0===e?(n.setVolume(1),t.innerHTML="",t.innerHTML="mute"):(n.setVolume(0),t.innerHTML="",t.innerHTML="unmute")})})}(),function(n){function e(){var e=n(this),t=e.css("background-size");"cover"!==t&&"contain"!==t||(n.data(this,"objectFitted")||(n.data(this,"objectFitted",!0),e.wrap("<div />").parent().addClass(this.className)),e.parent().css("backgroundImage","url("+(this.currentSrc||this.src)+")"),e.css("opacity",0))}"object-fit"in document.body.style||(n("img").on("load",e).each(e),n(window).on("resize orientationchange",n.throttle(250,function(){n("img").each(e)})))}(jQuery),function(t){t(".site-navicon").on("click",function(e){e.preventDefault(),t(document.documentElement).toggleClass("has-nav")}),t("img[data-src]").lazy(function(){var e=this;this.style.opacity="0",t(this).one("load",function(){return e.style.opacity=""}).attr({src:this.getAttribute("data-src"),sizes:this.getAttribute("data-sizes"),srcset:this.getAttribute("data-srcset"),"data-src":null,"data-sizes":null,"data-srcset":null}),this.complete&&t(this).trigger("load")}),t(document.body).on({keydown:function(e){9===e.which&&t(document.documentElement).addClass("has-tab-focus")},mousedown:function(){t(document.documentElement).removeClass("has-tab-focus")}})}(jQuery);